<mat-card>
    <mat-card-title>Administración de medicación</mat-card-title>
    <mat-card-subtitle>formulario para administrar la medicación al paciente</mat-card-subtitle>
    <mat-dialog-content class="mat-typography">

        <hr>
        <div class="grid grid-rows-1 mt-4">
            <h2>Siguiente medicación del paciente</h2>
        </div>
        <div class="grid grid-rows-1">
            <div class="mat-elevation-z8">
                <table mat-table [dataSource]="dataSourceDosis" class="sm:w-full">
            
                    <ng-container matColumnDef="numeroDosis" matTableDetalleMedicacion>
                        <th mat-header-cell *matHeaderCellDef> Número de dosis </th>
                        <td mat-cell *matCellDef="let element"> {{element.numeroDosis}} </td>
                    </ng-container>

                    <ng-container matColumnDef="fechaDosis">
                        <th mat-header-cell *matHeaderCellDef> Fecha dosis. </th>
                        <td mat-cell *matCellDef="let element"> {{element.fechaDosis | date: 'dd-MM-yyyy'}} </td>
                    </ng-container>

                    <ng-container matColumnDef="horaDosis">
                        <th mat-header-cell *matHeaderCellDef> Hora dosis. </th>
                        <td mat-cell *matCellDef="let element"> {{element.fechaDosis | date: 'HH:mm:ss'}} </td>
                    </ng-container>

                    <ng-container matColumnDef="medicamento">
                        <th mat-header-cell *matHeaderCellDef> Medicamento. </th>
                        <td mat-cell *matCellDef="let element"> {{element.detalleMedicacion.medicamento.nombre}} </td>
                    </ng-container>

                    <ng-container matColumnDef="acciones">
                        <th mat-header-cell *matHeaderCellDef> Acción. </th>
                        <td mat-cell *matCellDef="let element">
                            <button (click)="dosisRealizada(element)" mat-mini-fab 
                                style="background-color: rgb(30, 196, 30);
                                    " type="button">
                                <mat-icon style="color: white;">done</mat-icon></button> 
                        </td>
                    </ng-container>
                        
                    <tr mat-header-row *matHeaderRowDef="columnasDosis"></tr>
                    <tr mat-row *matRowDef="let row; columns: columnasDosis;"></tr>
                </table>
            </div>
        </div>

        <hr>
        <div class="grid grid-rows-1 mt-4">
            <h2>Última medicación del paciente</h2>
        </div>
        <div class="grid grid-rows-1">
            <div class="mat-elevation-z8">
                <table mat-table [dataSource]="dataSourceMedicamentos" class="sm:w-full">
            
                    <ng-container matColumnDef="medicamento" matTableDetalleMedicacion>
                        <th mat-header-cell *matHeaderCellDef> Medicamento </th>
                        <td mat-cell *matCellDef="let element"> {{element.medicamento.nombre}} </td>
                    </ng-container>

                    <ng-container matColumnDef="indicaciones">
                        <th mat-header-cell *matHeaderCellDef> Indicaciones. </th>
                        <td mat-cell *matCellDef="let element"> {{element.indicaciones}} </td>
                    </ng-container>

                    <ng-container matColumnDef="dosis">
                        <th mat-header-cell *matHeaderCellDef> Dosis. </th>
                        <td mat-cell *matCellDef="let element"> {{element.dosis}} </td>
                    </ng-container>

                    <ng-container matColumnDef="frecuencia">
                        <th mat-header-cell *matHeaderCellDef> Frecuencia. </th>
                        <td mat-cell *matCellDef="let element"> {{element.frecuencia}} </td>
                    </ng-container>

                    <ng-container matColumnDef="via">
                        <th mat-header-cell *matHeaderCellDef> Via. </th>
                        <td mat-cell *matCellDef="let element"> {{element.via}} </td>
                    </ng-container>
                        
                    <tr mat-header-row *matHeaderRowDef="columnasDetalleMedicacion"></tr>
                    <tr mat-row *matRowDef="let row; columns: columnasDetalleMedicacion;"></tr>
                </table>
            </div>
        </div>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
        <div class="w-100"></div>
    </mat-dialog-actions>
</mat-card>    

